name: action-config-cue-example
note: >-
  ```cue

  configVersion: "1"

  action: "pipeline"

  discovery: { root: ".", noGitignore: false, followSymlinks: false }

  workers: 8

  errors: { mode: "keep-going", embedErrors: true }

  lua: { timeoutMs: 2000, instructionLimit: 1000000, memoryLimitBytes: 8388608,
  libs: { base: true, table: true, string: true, math: true },
  deterministicRandom: true }

  validation: { allowUnknownTopLevel: false }

  locatorPolicy: { allowAbsolute: false, allowParentRefs: false, posixStyle:
  true }

  filter: { inline: "return (meta and meta.enabled) == true" }

  map:    { inline: "return { locator = locator, name = meta and meta.name }" }

  shell:  { enabled: true, program: "bash", argsTemplate: ["echo", "{json}"],
  workingDir: ".", env: { CI: "true" }, timeoutMs: 60000, failFast: true,
  capture: { stdout: true, stderr: true, maxBytes: 1048576 }, strictTemplating:
  true, killProcessGroup: true, termGraceMs: 2000 }

  postMap:{ inline: "return { locator = locator, exit = shell.exitCode }" }

  reduce: { inline: "return (acc or 0) + 1" }

  output: { lines: false, pretty: false, out: "-" }

  ```
labels:
  - design
